# Task ID: 122
# Title: Add unit tests for task-manager list-tasks module
# Status: done
# Dependencies: None
# Priority: high
# Description: Create unit tests covering scripts/modules/task-manager/list-tasks.js for happy path, status filtering, withSubtasks flag, and error handling using temp fixtures.
# Details:
Scope:
- File under tests/unit/task-manager/list-tasks.test.js
- Use tests/fixtures/test-tasks.json or temp copies; do not mutate repo fixtures.
- Cover: (1) returns tasks with default options; (2) filters by status; (3) withSubtasks=false prunes subtasks; (4) handles missing/invalid tasks file gracefully; (5) edge cases (empty tasks, invalid status).
- Mock only filesystem boundaries; avoid heavy mocking.
- Keep lines <120 chars, follow repo conventions.
Impact:
- Raises coverage for list-tasks.js from 0% significantly and exercises core listing behavior.

--- Updated 2025-10-03T19:23:15.404Z ---
Implemented unit tests for list-tasks JSON output and filtering.
- Files added: tests/unit/task-manager/list-tasks.test.js
- Covered: JSON mode details omission for tasks/subtasks, status filtering (including 'all'), happy path and error path when file missing
- Result: Tests passing; contributed to raising overall coverage

# Test Strategy:
Run npm test and npm run test:coverage. Verify uncovered lines for list-tasks.js decrease substantially. Include at least: success case, edge case, failure case.
